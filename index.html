<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Asistencia - SEC Sonora</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <img src="assets/logo.png" alt="Logo SEC Sonora" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM3YTFjNGEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTAgMTNhNSA1IDAgMCAwIDcgMGwzLTMiPjxwYXRoIGQ9Ik0xNCAxMWE1IDUgMCAwIDAtNyAwbC0zIDMiPjxwYXRoIGQ9Ik0yIDhhOCA4IDAgMCAxIDEwLjg3NCA3LjQ0OSIgLz48cGF0aCBkPSJNNSA0aDE0YTIgMiAwIDAgMSAyIDJ2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMlY2YTIgMiAwIDAgMSAyLTJ6Ii8+PC9zdmc+'">
                <div class="logo-text">
                    <h1>SEC Sonora</h1>
                    <p>Sistema de Gestión de Asistencia Escolar</p>
                </div>
            </div>
            <div class="auth-buttons">
                <button class="btn btn-outline" id="logoutBtn" style="display:none;">Cerrar Sesión</button>
                <button class="btn btn-primary" id="loginBtn">Iniciar Sesión</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container main-content">
        <!-- Login Form -->
        <div id="loginPage" class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <h2>Iniciar Sesión</h2>
                    <p>Ingrese sus credenciales para acceder al sistema</p>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="email">Correo Electrónico</label>
                        <input type="email" id="email" class="form-control" placeholder="usuario@ejemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" class="form-control" placeholder="Ingrese su contraseña" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Ingresar</button>
                </form>
                <div class="login-footer">
                    <p>¿Problemas para acceder? Contacte al administrador</p>
                </div>
            </div>
        </div>

        <!-- Dashboard (initially hidden) -->
        <div id="dashboardPage" style="display:none;">
            <div class="hero">
                <h2>Reportes de Asistencia Diaria</h2>
                <p id="welcomeMessage">Bienvenido al sistema de gestión de asistencia escolar</p>
                <div id="turnInfo" class="turn-info">
                    <h3>Turno Actual: <span id="currentTurn">Matutino</span></h3>
                    <p>Horario: <span id="turnTime">07:30 AM</span></p>
                    <p id="nextTurnInfo">Próximo turno: Vespertino a las 13:40</p>
                </div>
            </div>

            <div class="dashboard" id="schoolDashboard">
                <!-- Content will be loaded based on user role -->
            </div>

            <div id="adminPanel" style="display:none;">
                <div class="merge-section">
                    <h3>Consolidar Reportes</h3>
                    <div class="merge-action">
                        <button class="btn btn-primary" id="mergeBtn">Juntar 3 Archivos</button>
                        <div class="spinner" id="mergeSpinner"></div>
                        <button class="btn btn-success" id="sendBtn">Enviar Concentrado</button>
                    </div>
                </div>

                <div class="email-config">
                    <h3>Configuración de Correos Destinatarios</h3>
                    <div class="email-list" id="emailList">
                        <div class="email-item">
                            <span>supervision@sec-sonora.edu.mx</span>
                            <div class="email-actions">
                                <button class="btn-icon"><i class="fas fa-edit"></i></button>
                                <button class="btn-icon"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="email-item">
                            <span>director.secundaria6@sec-sonora.edu.mx</span>
                            <div class="email-actions">
                                <button class="btn-icon"><i class="fas fa-edit"></i></button>
                                <button class="btn-icon"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="add-email-form">
                        <input type="email" id="newEmail" class="form-control" placeholder="Nuevo correo electrónico">
                        <button class="btn btn-primary" id="addEmailBtn">Agregar</button>
                    </div>
                </div>

                <div class="history-section">
                    <h3>Historial de Reportes (Última Semana)</h3>
                    <div class="history-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Escuela</th>
                                    <th>Turno</th>
                                    <th>Alumnos</th>
                                    <th>Maestros</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <!-- Los datos del historial se cargarán dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="uploadModalTitle">Subir Reporte de Asistencia</h3>
            </div>
            <form id="uploadForm">
                <div class="form-group">
                    <label for="excelFile">Seleccione archivo Excel</label>
                    <input type="file" id="excelFile" accept=".xlsx, .xls" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeUploadModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Subir Archivo</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h4>SEC Sonora</h4>
                <p>Secretaría de Educación y Cultura del Estado de Sonora</p>
                <p>Hermosillo, Sonora, México</p>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <p>Teléfono: (662) 123-4567</p>
                <p>Email: contacto@sec-sonora.edu.mx</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces Rápidos</h4>
                <a href="#">Política de Privacidad</a>
                <a href="#">Términos de Uso</a>
                <a href="#">Soporte Técnico</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 SEC Sonora - Todos los derechos reservados</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>